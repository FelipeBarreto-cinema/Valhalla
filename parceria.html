<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valhalla Journey - Parceria</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RTWQ7TMZQX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-RTWQ7TMZQX');
  </script>

  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; flex-direction: column; height: 100vh; }
    header { background-color: #1a1a1a; color: white; padding: 15px; text-align: center; }
    .controls { background-color: #f4f4f4; padding: 10px; display: flex; justify-content: center; gap: 10px; }
    button { padding: 8px 12px; border: none; background-color: #1a1a1a; color: white; cursor: pointer; border-radius: 4px; }
    button:hover { background-color: #333; }
    #pdf-render { flex: 1; overflow: auto; text-align: center; background: #ccc; }
    canvas { margin: 10px auto; border: 1px solid #999; }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M3MSTG3T"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

  <header>
    <h1>Valhalla Journey - Parceria</h1>
  </header>

  <div class="controls">
    <button id="prev-page">Anterior</button>
    <button id="next-page">Próxima</button>
    <span>Página: <span id="page-num"></span> / <span id="page-count"></span></span>
    <button id="zoom-in">Zoom +</button>
    <button id="zoom-out">Zoom -</button>
    <button id="download">Download PDF</button>
  </div>

  <div id="pdf-render"></div>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.12.313/pdf.min.js"></script>
  <script>
    const url = 'https://www.valhallatourarraial.com.br/Valhalla-Journey-Parceria.pdf?utm_source=email&utm_medium=parceria&utm_campaign=2025';
    let pdfDoc = null, pageNum = 1, pageIsRendering = false, pageNumIsPending = null;
    let scale = 1.2;
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    document.getElementById('pdf-render').appendChild(canvas);

    const renderPage = num => {
      pageIsRendering = true;
      pdfDoc.getPage(num).then(page => {
        const viewport = page.getViewport({ scale });
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        page.render({ canvasContext: ctx, viewport }).promise.then(() => {
          pageIsRendering = false;
          if (pageNumIsPending !== null) { renderPage(pageNumIsPending); pageNumIsPending = null; }
        });
        document.getElementById('page-num').textContent = num;
      });
    };

    const queueRenderPage = num => pageIsRendering ? pageNumIsPending = num : renderPage(num);

    const showPrevPage = () => { if (pageNum <= 1) return; pageNum--; queueRenderPage(pageNum); };
    const showNextPage = () => { if (pageNum >= pdfDoc.numPages) return; pageNum++; queueRenderPage(pageNum); };

    pdfjsLib.getDocument(url).promise.then(pdf => {
      pdfDoc = pdf;
      document.getElementById('page-count').textContent = pdf.numPages;
      renderPage(pageNum);
    });

    document.getElementById('prev-page').addEventListener('click', showPrevPage);
    document.getElementById('next-page').addEventListener('click', showNextPage);
    document.getElementById('zoom-in').addEventListener('click', () => { scale += 0.2; queueRenderPage(pageNum); });
    document.getElementById('zoom-out').addEventListener('click', () => { scale = Math.max(0.2, scale - 0.2); queueRenderPage(pageNum); });
    document.getElementById('download').addEventListener('click', () => { window.open(url, '_blank'); });
  </script>
</body>
</html>
